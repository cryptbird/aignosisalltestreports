<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Patient Data</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.16.0/pdf-lib.min.js"></script>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin-top: 0;
            padding: 180px;
            margin: 10px 0 !important;
            /* Ensure margins are applied on all pages */
            /* padding: 0; */
        }

        .container {
            width: 100%;
            max-width: 7.5in;
            /* Ensure it fits within the PDF width (8.5in - margins) */
            /* margin: auto; */
            overflow: hidden;
            /* Prevent content overflow */
            word-wrap: break-word;
            /* Wrap long text */
        }

        .data-field {
            margin-bottom: 10px;
            font-size: 16px;
        }

        .label {
            font-weight: bold;
        }

        #printBtn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #printBtn:hover {
            background-color: #0056b3;
        }

        #chartContainer {
            margin-top: 40px;
            max-width: 7.5in;
            /* Match container width */
            overflow-x: auto;
            /* Allow scrolling for wide charts */
        }

        #chartContainermchat {
            margin-top: 40px;
            max-width: 7.5in;
            /* Match container width */
            overflow-x: auto;
            /* Allow scrolling for wide charts */
        }

        .pageheadline {
            padding-bottom: 15px;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
                Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue",
                sans-serif;
            font-weight: 600;
            font-size: large;
        }

        .reportheading {
            font-size: 30px;
            font-family: "Times New Roman", Times, serif;
            font-weight: 900;
            margin-top: 50px;
            margin-left: 25px;
            margin-right: 25px;
        }

        .reportcontent {
            margin: 25px;
            font-size: 15px;
            color: #000;
            font-family: "Times New Roman", Times, serif;
            font-weight: 600;
            line-height: 25px;
        }

        .scorecontent {
            margin: 25px;
            font-size: 12px;
            color: #727a98;
            font-family: "Times New Roman", Times, serif;
            font-weight: 600;
            line-height: 15px;
        }

        #contentToPrint {
            /* background-color: #FFDDDD; */
            /* Light pink background */
            padding: 20px;
            /* Add padding for better spacing */
            margin: 10px 0 !important;
            /* Add space before and after pages */
            /* padding: 10px;  */
            page-break-inside: avoid;
            /* Avoid cutting content in between */
        }
        /* Prevent table rows from breaking across pages */
table {
    page-break-inside: 60px;
    width: 100%;
    border-collapse: collapse;
}

tr {
    page-break-inside: avoid;
    page-break-after: auto;
}

td, th {
    padding: 8px;
    border: 1px solid #ccc;
    word-wrap: break-word;
}
        .pagebreak {
            page-break-before: always;
            /* Force a new page */
        }

        /* Desktop mode for mobile */
        @media only screen and (max-width: 767px) {
            .container {
                width: 1024px;
            }

            body {
                margin: 10px 0 !important;
                /* Ensure margins are applied on all pages */
                padding: 0;
            }

            #contentToPrint {
                margin: 10px 0 !important;
                /* Add space before and after pages */
                padding: 10px;
                page-break-inside: avoid;
                /* Avoid cutting content in between */
            }

            .pagebreak {
                page-break-before: always;
                /* Force a new page */
            }
        }
    </style>
</head>

<body>


    <!-- -------------------ISAA REPORT CONTENT STARTS------------------- -->
    <center>
        <button id="printBtn">Print PDF</button>
    </center>

    <div id="contentToPrint" style="margin: 0; padding: 10">

        <div id="ISAA" >
            <div style="display: flex; border-bottom: 5px solid #ab29b9;">
                <div>
                    <div class="pageheadline" style="border-bottom: 0; font-size: small;" id="pageheadlinedate"> .</div>
                    <div class="pageheadline" style="display: flex;">Detailed ISAA Report</div>
                </div>
                <div style="margin-left: auto; margin-right: 0; ">
                    <div style=" height: 60px;">

                        <img src="aignosislogo.png" style="max-height:150%; max-width:150%;" alt="">

                    </div>
                </div>
            </div>
            <div class="reportheading">
                <span style="color: #9b00ab">ISAA </span>Screening:
            </div>
            <div class="reportcontent">
                The Indian Scale for Assessment of Autism (ISAA) is a standardized tool designed to evaluate autism
                spectrum disorder (ASD) in children. It assesses social, emotional, communication, behavioral, sensory,
                and cognitive aspects through structured observations and parent interviews. The ISAA score helps
                determine the severity of autism, categorizing it as mild, moderate, or severe. A higher score indicates
                more pronounced autism-related challenges. It is widely used in clinical, research, and diagnostic
                settings in India.
                <br />
                The system provides outputs as <span id="isaaInterpretationmessage"
                    style="font-size: 15px; color: #007bff;"></span> and the Aignosis ISAA test output was: <span id='isaascore'
                    style="font-size: xx-large; color: #007bff;"></span> <br>
                <br />
            </div>
            <span style="
          color: #9b00ab;
          font-family: 'Times New Roman', Times, serif;
          font-size: 20px;
          font-weight: 600;
		  margin-left: 25px;
        ">
                Detailed Psychology Report
            </span>
            <br />
            <span style="
          font-family: 'Times New Roman', Times, serif;
          font-size: 12px;
          font-weight: 600;
		  margin-left: 25px;
        ">
                Summary of Domain Specific Challenges
            </span>
            <br />

            <center>
                <center>
                    <table border="2" style="width: 50%; text-align: center; margin-top: 20px; border-collapse: collapse;">
                        <tr>
                            <th style="padding: 10px; background-color: #94059f; color: white;">Field</th>
                            <th style="padding: 10px; background-color: #94059f; color: white;">Value</th>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc;">Name</td>
                            <td style="padding: 8px; border: 1px solid #ccc;" id="isaapatientNamecell">_</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc;">ISAA Score</td>
                            <td style="padding: 8px; border: 1px solid #ccc;" id="ISAAScorecell">_</td>
                        </tr>
                        <tr>
                            <td style="padding: 8px; border: 1px solid #ccc;">Classification</td>
                            <td style="padding: 8px; border: 1px solid #ccc;" id="ISAAinterpretation">_</td>
                        </tr>
                    </table>
                </center>

                <div class="container" id="contentToPrint">
                    <!-- <h1>Patient Information</h1> -->
                    <div id="patientData" hidden>
                        <!-- Data will be displayed here -->
                    </div>
                    
                    <div id="chartContainer">
                        <!-- <h2>Percentage Chart</h2> -->
                        <canvas id="barChart" style="margin-top: -30px;"></canvas>
                        <br><br><br><br><br>
                        <div id="queryparametersisaa"></div>
                    </div>
                </div>
                
                <table border="4" style="width: 50%; text-align: center; margin-top: -30px;">
                    <tr>
                        <th>Score Range</th>
                        <th>Classification</th>
                    </tr>
                    <tr>
                        <td>&lt; 70</td>
                        <td>Normal</td>
                    </tr>
                    <tr>
                        <td>70 - 105</td>
                        <td>Mild Autism</td>
                    </tr>
                    <tr>
                        <td>106 - 153</td>
                        <td>Moderate Autism</td>
                    </tr>
                    <tr>
                        <td>&gt; 153</td>
                        <td>Severe Autism</td>
                    </tr>
                </table>

            </center>
            <div class="scorecontent">
                
                <!-- 0% developmental score - maximally neurotypical score. A score of 100% developmental challenge is achieved if the most neurotypical response is selected for each relevant question in
		this domain. <br>
		100%, developmental score = maximally atypical score. A score of 100%. developmental challenge is achieved if the most atypical response is selected for each relevant question in this
		domain. <br> -->
            </div>
            <br>
            </div>
        <script>


            // Function to get URL parameters
            function getURLParameter(name) {
                const urlParams = new URLSearchParams(window.location.search);
                return urlParams.get(name);
            }
             // List of M-CHAT questions
        const ISAAQuestions = [
            [
            "Has poor eye contact",
    "Lacks social smile",
    "Remains aloof",
    "Does not reach out to others",
    "Unable to relate to people",
    "Unable to respond to social/ environmental cues",
    "Engages in solitary and repetitive play activities",
    "Unable to take turns in social interaction",
    "Does not maintain peer relationships"],[
    "Shows inappropriate emotional response",
    "Shows exaggerated emotions",
    "Engages in self-stimulating emotions",
    "Lacks fear of danger",
    "Excited or agitated for no apparent reason"],[
    "Acquired speech and lost it",
    "Has difficulty in using non-verbal language or gestures to communicate",
    "Engages in stereotyped and repetitive use of language",
    "Engages in echolalic speech",
    "Produces infantile squeals/ unusual noises",
    "Unable to initiate or sustain conversation with others",
    "Uses jargon or meaningless words",
    "Uses pronoun reversals",
    "Unable to grasp pragmatics of communication (real meaning)"],[
    "Engages in stereotyped and repetitive motor mannerisms",
    "Shows attachment to inanimate objects",
    "Shows hyperactivity/ restlessness",
    "Exhibits aggressive behavior",
    "Throws temper tantrums",
    "Engages in self-injurious behavior",
    "Insists on sameness"],[
    "Unusually sensitive to sensory stimuli",
    "Stares into space for long periods of time",
    "Has difficulty in tracking objects",
    "Has unusual vision",
    "Insensitive to pain",
    "Responds to objects/people unusually by smelling, touching or tasting"],[
    "Inconsistent attention and concentration",
    "Shows delay in responding",
    "Has unusual memory of some kind",
    "Has 'savant' ability"]
        ];

        // Function to display M-CHAT responses
        function displayISAAResponses() {
    const urlParams = new URLSearchParams(window.location.search);
    const queryContainer = document.getElementById("queryparametersisaa");

    // Domain names
    const domainNames = [
        "Social Relationship and Reciprocity",
        "Emotional Responsiveness",
        "Speech, Language, and Communication",
        "Behavioral Patterns",
        "Sensory Aspects",
        "Cognitive Component"
    ];

    // Number of questions in each domain
    const isaasubques = [9, 5, 9, 7, 6, 4];

    let ISAATables = ""; // Store all tables

    for (let i = 1; i <= 6; i++) {
        ISAATables += `
            <h3 style="color: #94059f; font-family: Arial, sans-serif;">${domainNames[i - 1]}</h3>
            <table border="2" style="width: 100%; text-align: left; border-collapse: collapse; margin-bottom: 20px;">
                <tr>
                    <th style="padding: 10px; background-color: #94059f; color: white;">Question</th>
                    <th style="padding: 10px; background-color: #94059f; color: white;">Response</th>
                </tr>`;

        for (let j = 1; j <= isaasubques[i - 1]; j++) {
            let response = urlParams.get(`ISAA_${i}.${j}`) || "N/A"; // Fetch response for each question
            ISAATables += `
                <tr>
                    <td style="padding: 8px; border: 1px solid #ccc;">${ISAAQuestions[i - 1][j - 1]}</td>
                    <td style="padding: 8px; border: 1px solid #ccc; color: #94059f;">${response}</td>
                </tr>`;
        }

        ISAATables += `</table>`; // Close the table
    }

    queryContainer.innerHTML = ISAATables; // Insert all tables into the container
}

            // Function to display the data
            function displayData() {
                const patientData = {
                    patientId: getURLParameter("patient_id"),
                    socialResponsiveness:
                        parseFloat(getURLParameter("social_response")) || 0,
                    emotionalResponsiveness:
                        parseFloat(getURLParameter("emotional_response")) || 0,
                    speechRecognition:
                        parseFloat(getURLParameter("speech_recognition")) || 0,
                    behaviouralPattern:
                        parseFloat(getURLParameter("behaviour_pattern")) || 0,
                    sensoryAspects: parseFloat(getURLParameter("sensory_aspect")) || 0,
                    cognitiveComponent: parseFloat(getURLParameter("cognitive")) || 0,
                    TOT_ISAA: parseFloat(getURLParameter("TOT_ISAA")) || 0,
                    isaaInterpretation: getURLParameter("isaaInterpretation") || 0,
                };

                const patientDataContainer = document.getElementById("patientData");
                for (const [key, value] of Object.entries(patientData)) {
                    const fieldDiv = document.createElement("div");
                    fieldDiv.classList.add("data-field");
                    fieldDiv.innerHTML = `<span class="label">${key
                        .replace(/([A-Z])/g, " $1")
                        .toUpperCase()}:</span> ${value || "N/A"}`;
                    patientDataContainer.appendChild(fieldDiv);
                }

                // Generate bar chart
                createBarChart(patientData);
                const currentDate = new Date().toLocaleString();
                document.getElementById('pageheadlinedate').innerHTML = currentDate;
                document.getElementById('isaascore').innerHTML = patientData.TOT_ISAA;
                document.getElementById('isaaInterpretationmessage').innerHTML = patientData.isaaInterpretation;
            }

            // Function to create a horizontal bar chart
            function createBarChart(data) {
                console.log(data);
                const labels = [
                    "Social Responsiveness",
                    "Emotional Responsiveness",
                    "Speech Recognition",
                    "Behavioural Pattern",
                    "Sensory Aspects",
                    "Cognitive Component",
                ];

                const values = [
                    data.socialResponsiveness,
                    data.emotionalResponsiveness,
                    data.speechRecognition,
                    data.behaviouralPattern,
                    data.sensoryAspects,
                    data.cognitiveComponent,
                ];
                console.log("cognitive = "+data.cognitiveComponent);
                const ctx = document.getElementById("barChart").getContext("2d");
                new Chart(ctx, {
                    type: "bar",
                    data: {
                        labels: labels,
                        datasets: [
                            {
                                label: "Percentage",
                                data: values,
                                backgroundColor: [
                                    "#93ef93",
                                    "#8bd0fa",
                                    "#fffe35",
                                    "#bc81f6",
                                    "#f7a000",
                                    "#cbcbcb",
                                ],
                                borderColor: [
                                    "rgba(75, 192, 192, 1)",
                                    "rgba(54, 162, 235, 1)",
                                    "rgba(255, 206, 86, 1)",
                                    "rgba(153, 102, 255, 1)",
                                    "rgba(255, 159, 64, 1)",
                                    "rgba(201, 203, 207, 1)",
                                ],
                                borderWidth: 1,
                            },
                        ],
                    },
                    options: {
                        indexAxis: "y", // This reverses the axes
                        scales: {
                            x: {
                                beginAtZero: true,
                                max: 100,
                            },
                        },
                        plugins: {
                            datalabels: {
                                color: "white", // Set text color to white
                                anchor: "center", // Center the labels inside the bars
                                align: "center",
                                font: {
                                    weight: "bold",
                                    size: 14, // Adjust font size if necessary
                                },
                                formatter: function(value) {
                                    return value.toFixed(2); // Display values up to 2 decimal places
                                }
                            },
                        },
                    },
                    plugins: [ChartDataLabels], // Register the plugin

                });
            }

            // Call the function to display data once the page loads
            // window.onload = displayData;

            // Add functionality to the Print PDF button
            // document
            //     .getElementById("printBtn")
            //     .addEventListener("click", function () {
            //         const element = document.getElementById("contentToPrint");
            //         const options = {
            //             margin: [0, 0, 0, 0], // No margins
            //             filename: "patient_data.pdf",
            //             image: { type: "jpeg", quality: 0.98 },
            //             html2canvas: {
            //                 scale: 2, // Higher scale for better quality
            //                 width: element.offsetWidth, // Use container width
            //             },
            //             jsPDF: { unit: "in", format: "letter", orientation: "portrait" },
            //         };
            //         html2pdf()
            //             .set({
            //                 html2canvas: { scrollX: 0, scrollY: 0 },
            //             })
            //             .from(element)
            //             .save();
            //     });

            document.getElementById("printBtn").addEventListener("click", async function () {
        const element = document.getElementById("contentToPrint");

        if (!element) {
            console.error("Error: #contentToPrint not found!");
            alert("Error: Unable to find content to print.");
            return;
        }

        const options = {
            margin: [10, 10, 10, 10],
            filename: "new_patient_data.pdf",
            image: { type: "jpeg", quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: "in", format: "letter", orientation: "portrait" }
        };

        try {
            // Ensure content is fully loaded before conversion
            await new Promise(resolve => setTimeout(resolve, 500));

            // Generate new PDF as blob
            console.log("Generating new PDF from content...");
            const newPdfBlob = await html2pdf().from(element).toPdf().output('blob');
            const newPdfBytes = await newPdfBlob.arrayBuffer();
            console.log("New PDF generated successfully.");

            // Fetch existing PDF (PDF1.pdf)
            console.log("Fetching existing PDF1.pdf...");
            const existingPdfResponse = await fetch('PDF1.pdf');
            if (!existingPdfResponse.ok) throw new Error("Failed to load PDF1.pdf");
            const existingPdfBytes = await existingPdfResponse.arrayBuffer();
            console.log("Existing PDF loaded successfully.");

            // Load PDFs using PDF-Lib
            const { PDFDocument } = window.PDFLib;
            const existingPdfDoc = await PDFDocument.load(existingPdfBytes);
            const newPdfDoc = await PDFDocument.load(newPdfBytes);
            const mergedPdf = await PDFDocument.create();

            // Get the first page to determine the size
            const existingPages = await existingPdfDoc.copyPages(existingPdfDoc, [0]);
            if (existingPages.length === 0) throw new Error("No pages found in PDF1.pdf");

            const firstExistingPage = existingPages[0];
            const width = firstExistingPage?.getWidth() || 612;  // Default to A4 width if undefined
            const height = firstExistingPage?.getHeight() || 792; // Default to A4 height if undefined
            console.log(`Using dimensions: Width=${width}, Height=${height}`);

            async function addPages(sourceDoc, targetDoc) {
                const pages = await targetDoc.copyPages(sourceDoc, sourceDoc.getPageIndices());
                pages.forEach(page => {
                    page.setWidth(width);
                    page.setHeight(height);
                    targetDoc.addPage(page);
                });
            }

            // Merge PDFs while maintaining page sizes
            await addPages(existingPdfDoc, mergedPdf);
            await addPages(newPdfDoc, mergedPdf);

            // Save merged PDF
            console.log("Saving merged PDF...");
            const mergedPdfBytes = await mergedPdf.save();
            const blob = new Blob([mergedPdfBytes], { type: "application/pdf" });

            // Trigger download
            const link = document.createElement("a");
            link.href = URL.createObjectURL(blob);
            const urlParams = new URLSearchParams(window.location.search);
            const patientName = urlParams.get("Name") || "N/A";
            link.download = `${patientName}_Report.pdf`;
            link.click();
            console.log("Merged PDF downloaded successfully.");
        } catch (error) {
            console.error("Error generating PDF:", error);
            alert("Failed to generate PDF. See console for details.");
        }
    });
</script>
        <!-- -------------------ISAA REPORT CONTENT ENDS------------------- -->
        

        <!-- <div class="pagebreak"></div> -->
        <!-- -------------------mchat REPORT CONTENT STARTS ----------------- -->
        <div id="MCHAT">
            <br><br><br><br><br><br><br><br>
            <div style="display: flex; border-bottom: 5px solid #ab29b9;">
                <div>
                    <div class="pageheadline" style="border-bottom: 0; font-size: small;" id="pageheadlinedatemchat"> .
                    </div>
                    <div class="pageheadline" style="display: flex;">Detailed M-CHAT Report</div>
                </div>
                <div style="margin-left: auto; margin-right: 0; ">
                    <div style=" height: 60px;">

                        <img src="aignosislogo.png" style="max-height:150%; max-width:150%;" alt="">

                    </div>
                </div>
            </div>
            <div class="reportheading">
                <span style="color: #9b00ab">M-CHAT </span>Report:
            </div>
            <div class="reportcontent">

                The M-CHAT (Modified Checklist for Autism in Toddlers) is a widely used screening tool designed to
                identify early signs of autism spectrum disorder (ASD) in children aged 16 to 30 months. This assessment
                evaluates critical developmental domains such as social interaction, communication skills, and
                behavioral patterns, helping to detect potential risk factors for autism at an early stage.
                <br>
                The M-CHAT score provides a structured analysis of the child's responses, categorizing them into low,
                medium, or high risk for ASD. The system generates an overall risk assessment based on the child's
                responses to key questions, which focus on joint attention, pretend play, response to name, and social
                engagement.
                <br>
                The results include a risk classification indicator, which helps determine whether a child exhibits
                typical development, mild concerns requiring follow-up, or significant risk necessitating further
                evaluation. Early identification through M-CHAT allows for timely interventions, improving long-term
                developmental outcomes. <BR>

                <span id="MCHATscore" style="font-size: 35px; color: #007bff;"></span>
            </div>
            <span style="
        color: #9b00ab;
        font-family: 'Times New Roman', Times, serif;
        font-size: 20px;
        font-weight: 600;
        margin-left: 25px;
        ">
                Detailed M-CHAT Report
            </span>
            <br />
            <span style="
        font-family: 'Times New Roman', Times, serif;
        font-size: 12px;
        font-weight: 600;
        margin-left: 25px;
        ">
                Summary of Domain Specific Challenges
            </span>

            <!-- Patient Information Table -->
            <center>
                <table border="2" style="width: 50%; text-align: center; margin-top: 20px; border-collapse: collapse;">
                    <tr>
                        <th style="padding: 10px; background-color: #94059f; color: white;">Field</th>
                        <th style="padding: 10px; background-color: #94059f; color: white;">Value</th>
                    </tr>
                    <tr>
                        <td style="padding: 8px; border: 1px solid #ccc;">Name</td>
                        <td style="padding: 8px; border: 1px solid #ccc;" id="patientNamecell">_</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; border: 1px solid #ccc;">MCHAT Score</td>
                        <td style="padding: 8px; border: 1px solid #ccc;" id="mchatScorecell">_</td>
                    </tr>
                    <tr>
                        <td style="padding: 8px; border: 1px solid #ccc;">Chronological Age</td>
                        <td style="padding: 8px; border: 1px solid #ccc;" id="chronologicalAgecell">_</td>
                    </tr>
                </table>
            </center>
            <div class="scorecontent">
                <p>The Aignosis M-CHAT test output provides an assessment of the child's developmental patterns based on
                    their responses to key screening questions.</p>

                <p>
                    <strong>Lower M-CHAT Score:</strong> A lower score indicates that the child's responses align
                    closely with typical developmental milestones, suggesting a minimal likelihood of autism spectrum
                    disorder (ASD). In this case, the child exhibits expected social communication, interaction, and
                    behavioral patterns. This means that the child's development is progressing in a way that is
                    generally considered neurotypical.
                </p>

                <p>
                    <strong>Higher M-CHAT Score:</strong> A higher score suggests that the child's responses indicate a
                    greater number of atypical behaviors or developmental delays, which may be associated with autism
                    spectrum disorder. This means that the child may face challenges in areas such as communication, eye
                    contact, social engagement, and behavioral flexibility. A high score does not confirm a diagnosis of
                    autism but serves as an early indicator that further evaluation by a specialist may be necessary.
                </p>

                <p>
                    The M-CHAT screening tool is designed to help identify children who may require additional
                    assessment and intervention at an early stage. Early detection and timely intervention can play a
                    crucial role in supporting a child's developmental needs and improving long-term outcomes.
                </p>
            </div>



            <!-- <span style="font-family: 'Times New Roman', Times, serif; margin-left: 25px;">
            Lower scores indicate high Challenges
        </span> -->
            <center>
                <div class="container" id="contentToPrint">
                    <!-- <h1>Patient Information</h1> -->
                    <div id="patientData" hidden>
                        <!-- Data will be displayed here -->
                    </div>

                    <div id="chartContainermchat">
                        <!-- Display query parameters instead of the bar chart -->
                        <!-- <h2>Query Parameters</h2> -->
                        <div id="queryParameters"></div>
                    </div>
                </div>
            </center>



            <br> <br><br><br><br> <br>
        </div>
    
    <script>
        // Function to format numbers to 1 decimal place
        function formatToOneDecimal(value) {
            return parseFloat(value).toFixed(1);
        }

        // List of M-CHAT questions
        const mchatQuestions = [
    "If you point at something across the room, does your child look at it? (FOR EXAMPLE, if you point at a toy or an animal, does your child look at the toy or animal?)",
    "Have you ever wondered if your child might be deaf?",
    "Does your child play pretend or make-believe? (FOR EXAMPLE, pretend to drink from an empty cup, pretend to talk on a phone, or pretend to feed a doll or stuffed animal?)",
    "Does your child like climbing on things? (FOR EXAMPLE, furniture, playground equipment, or stairs)",
    "Does your child make unusual finger movements near his or her eyes? (FOR EXAMPLE, does your child wiggle his or her fingers close to his or her eyes?)",
    "Does your child point with one finger to ask for something or to get help? (FOR EXAMPLE, pointing to a snack or toy that is out of reach)",
    "Does your child point with one finger to show you something interesting? (FOR EXAMPLE, pointing to an airplane in the sky or a big truck in the road)",
    "Is your child interested in other children? (FOR EXAMPLE, does your child watch other children, smile at them, or go to them?)",
    "Does your child show you things by bringing them to you or holding them up for you to see – not to get help, but just to share? (FOR EXAMPLE, showing you a flower, a stuffed animal, or a toy truck)",
    "Does your child respond when you call his or her name? (FOR EXAMPLE, does he or she look up, talk or babble, or stop what he or she is doing when you call his or her name?)",
    "When you smile at your child, does he or she smile back at you?",
    "Does your child get upset by everyday noises? (FOR EXAMPLE, does your child scream or cry to noise such as a vacuum cleaner or loud music?)",
    "Does your child walk?",
    "Does your child look you in the eye when you are talking to him or her, playing with him or her, or dressing him or her?",
    "Does your child try to copy what you do? (FOR EXAMPLE, wave bye-bye, clap, or make a funny noise when you do)",
    "If you turn your head to look at something, does your child look around to see what you are looking at?",
    "Does your child try to get you to watch him or her? (FOR EXAMPLE, does your child look at you for praise, or say 'look' or 'watch me'?)",
    "Does your child understand when you tell him or her to do something? (FOR EXAMPLE, if you don’t point, can your child understand 'put the book on the chair' or 'bring me the blanket'?)",
    "If something new happens, does your child look at your face to see how you feel about it? (FOR EXAMPLE, if he or she hears a strange or funny noise, or sees a new toy, will he or she look at your face?)",
    "Does your child like movement activities? (FOR EXAMPLE, being swung or bounced on your knee)"
];


        // Function to display M-CHAT responses
        function displayMChatResponses() {
            const urlParams = new URLSearchParams(window.location.search);
            const queryContainer = document.getElementById("queryParameters");

            let mchatTable = `<table border="2" style="width: 100%; text-align: left; border-collapse: collapse;">
            <tr>
                <th style="padding: 10px; background-color: #94059f; color: white;">Question</th>
                <th style="padding: 10px; background-color: #94059f; color: white;">Response</th>
            </tr>`;

            for (let i = 1; i <= 23; i++) {
                let response = urlParams.get(`MCHAT_${i.toString().padStart(2, '0')}`) || "N/A"; // Fetch response for MCHAT_01, MCHAT_02, ..., MCHAT_23
                mchatTable += `
            <tr>
                <td style="padding: 8px; border: 1px solid #ccc;">${mchatQuestions[i - 1]}</td>
                <td style="padding: 8px; border: 1px solid #ccc; color: #94059f;">${response}</td>
            </tr>`;
            }

            mchatTable += `</table>`;

            queryContainer.innerHTML = mchatTable;
        }
        // Function to check and hide MCHAT section if needed
        function handleMChatVisibility() {
            const urlParams = new URLSearchParams(window.location.search);
            const mchatValue = urlParams.get("MCHAT");

            if (mchatValue === "Negative") {
                document.getElementById("MCHAT").style.display = "None"; // Hide the MCHAT section
            }
        }
        function handleISAAVisibility() {
            const urlParams = new URLSearchParams(window.location.search);
            const ISAAValue = urlParams.get("ISAA");

            if (ISAAValue === "Negative") {
                document.getElementById("ISAA").style.visibility = "hidden"; // Hide the ISAA section
            }
        }
        // Update on page load
        // window.onload = () => {
           
        // };

    </script>
    <!-- ---------------- M-CHAT Report Ends --------------------- -->

    <!-- ---------------- CARS Report Starts --------------------- -->

    <div id="CARS">
        
        <div style="display: flex; border-bottom: 5px solid #ab29b9;">
            <div>
                <div class="pageheadline" style="border-bottom: 0; font-size: small;" id="pageheadlinedateCARS"> .
                </div>
                <div class="pageheadline" style="display: flex;">Detailed CARS Report</div>
            </div>
            <div style="margin-left: auto; margin-right: 0; ">
                <div style=" height: 60px;">

                    <img src="aignosislogo.png" style="max-height:150%; max-width:150%;" alt="">

                </div>
            </div>
        </div>
        <div class="reportheading">
            <span style="color: #9b00ab">CARS </span>Report:
        </div>
        <div class="reportcontent">

            The CARS (Childhood Autism Rating Scale) is a widely used tool designed to assess the severity of autism spectrum disorder (ASD) in children. This assessment evaluates critical developmental domains such as social interaction, communication skills, and behavioral patterns to help identify early signs of autism.

<br>
The CARS score provides a structured analysis of the child's behavior, categorizing them into varying degrees of severity of autism. The system generates an overall assessment based on the child’s responses across key areas like social interaction, emotional response, imitation, and adaptation to change.

<br>
The results include a severity classification indicator, which helps determine whether a child exhibits typical development, mild signs requiring follow-up, or significant concerns necessitating further evaluation. Early identification through CARS allows for targeted interventions, improving long-term developmental outcomes.

<BR>
            Score : <span id="CARSscore" style="font-size: 35px; color: #007bff;"></span>
        </div>
        <span style="
    color: #9b00ab;
    font-family: 'Times New Roman', Times, serif;
    font-size: 20px;
    font-weight: 600;
    margin-left: 25px;
    ">
            Detailed CARS Report
        </span>
        <br />
        <span style="
    font-family: 'Times New Roman', Times, serif;
    font-size: 12px;
    font-weight: 600;
    margin-left: 25px;
    ">
            Summary of Domain Specific Challenges
        </span>
        <br><br>
        <!-- Patient Information Table -->
        <center>
            <table border="2" style="width: 50%; text-align: center; margin-top: 20px; border-collapse: collapse;">
                <tr>
                    <th style="padding: 10px; background-color: #94059f; color: white;">Field</th>
                    <th style="padding: 10px; background-color: #94059f; color: white;">Value</th>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ccc;">Name</td>
                    <td style="padding: 8px; border: 1px solid #ccc;" id="CARSpatientNamecell">_</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ccc;">CARS Score</td>
                    <td style="padding: 8px; border: 1px solid #ccc;" id="CARSScorecell">_</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ccc;">Classification</td>
                    <td style="padding: 8px; border: 1px solid #ccc;" id="CARSinterpretation">_</td>
                </tr>
            </table>
        </center>
        <br>
        <div class="scorecontent">
            <p>The  CARS (Childhood Autism Rating Scale) test output provides an assessment of the child's behavior patterns based on their responses to key screening questions across various developmental domains.</p> <p> <strong>Lower CARS Score:</strong> A lower score indicates that the child’s behaviors align closely with typical developmental milestones, suggesting a minimal likelihood of autism spectrum disorder (ASD). In this case, the child exhibits expected social interaction, communication, and behavioral patterns, indicating that the child’s development is progressing typically. </p> <p> <strong>Higher CARS Score:</strong> A higher score suggests that the child’s responses indicate a greater degree of atypical behaviors or developmental delays, which may be associated with autism spectrum disorder. This means that the child may experience challenges in areas such as social communication, emotional response, imitation, and flexibility. A higher score doesn’t confirm a diagnosis of autism but serves as an early indicator that further evaluation by a specialist may be necessary. </p> <p> The CARS screening tool is designed to help identify children who may require additional assessment and intervention at an early stage. Early detection and timely intervention can play a crucial role in supporting a child’s developmental needs and improving long-term outcomes. </p>
        </div>



        <!-- <span style="font-family: 'Times New Roman', Times, serif; margin-left: 25px;">
        Lower scores indicate high Challenges
    </span> -->
        <center>
            <div class="container" id="contentToPrint">
                <!-- <h1>Patient Information</h1> -->
                <div id="patientData" hidden>
                    <!-- Data will be displayed here -->
                </div>
                <br><br><br><br><br><br>
                <div id="CARSbarchart" style="width: 100%; max-width: 900px; height: 500px; margin: auto;">
                    <canvas id="CARSChart"></canvas>
                </div>
                
                <div id="chartContainerCARS">
                    <!-- Display query parameters instead of the bar chart -->
                    <!-- <h2>Query Parameters</h2> -->

                    <div id="queryParametersCARS"></div>
                </div>
            </div>
        </center>




    </div>
    

    <script>
    function createCARSChart() {
    const urlParams = new URLSearchParams(window.location.search);
    const CARSQuestions = [
        "Relating to People", "Imitation", "Emotional Response", "Body Use",
        "Object Use", "Adaptation to Change", "Visual Response", "Listening Response",
        "Taste, Smell, and Touch Response and Use", "Fear or Nervousness", "Verbal Communication",
        "Nonverbal Communication", "Activity Level", "Level and Consistency of Intellectual Response",
        "General Impressions"
    ];

    // Extract CARS scores from URL parameters (default to 0)
    const CARSscores = CARSQuestions.map((_, index) => {
        return parseFloat(urlParams.get(`CARS_${index + 1}`)) || 0;
    });

    // Generate unique colors for each bar
    const barColors = [
        "#ff5733", "#33ff57", "#5733ff", "#ff33a8", "#33a8ff",
        "#a8ff33", "#ff8c33", "#33ff8c", "#8c33ff", "#ff338c",
        "#338cff", "#8cff33", "#ffcc33", "#33ffcc", "#cc33ff"
    ];

    const ctx = document.getElementById("CARSChart").getContext("2d");

    new Chart(ctx, {
        type: "bar",
        data: {
            labels: CARSQuestions, // Display labels on the Y-axis
            datasets: [{
                label: "CARS Scores",
                data: CARSscores,
                backgroundColor: barColors,
                borderWidth: 1
            }]
        },
        options: {
            indexAxis: "y", // Display the chart horizontally
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { display: false }, // Hide legend
                tooltip: { enabled: true },
                datalabels: {
                    color: "white", // White text inside bars
                    anchor: "center",
                    align: "center",
                    font: { size: 12, weight: "bold" },
                    formatter: function(value) {
                        return value.toFixed(2); // Show values with 2 decimal places
                    }
                }
            },
            scales: {
                x: {
                    beginAtZero: true,
                    max: 4, // CARS scores range from 0 to 4
                    title: {
                        display: true,
                        text: "Scores (0 - 4)", // Label for X-axis
                        font: { size: 14 }
                    }
                },
                y: {
                    title: {
                        display: true,
                        text: "CARS Questions", // Label for Y-axis
                        font: { size: 14 }
                    }
                }
            }
        },
        plugins: [ChartDataLabels] // Enables the data labels plugin
    });
}




        // Function to format numbers to 1 decimal place
        function formatToOneDecimal(value) {
            return parseFloat(value).toFixed(1);
        }

        // List of M-CHAT questions
        const CARSQuestions = [
            "Relating to People",
            "Imitation",
            "Emotional Response",
            "Body Use",
            "Object Use",
            "Adaptation to Change",
            "Visual Response",
            "Listening Response",
            "Taste, Smell, and Touch Response and Use",
            "Fear or Nervousness",
            "Verbal Communication",
            "Nonverbal Communication",
            "Activity Level",
            "Level and Consistency of Intellectual Response",
            "General Impressions"
        ];

        // Function to display M-CHAT responses
        function displayCARSResponses() {
            const urlParams = new URLSearchParams(window.location.search);
            const queryContainer = document.getElementById("queryParametersCARS");

            let CARSTable = `<table border="2" style="width: 100%; text-align: left; border-collapse: collapse;">
        <tr>
            <th style="padding: 10px; background-color: #94059f; color: white;">Question</th>
            <th style="padding: 10px; background-color: #94059f; color: white;">Response</th>
        </tr>`;

            for (let i = 1; i <= 15; i++) {
                let response = urlParams.get(`CARS_${i.toString()}`) || "N/A"; // Fetch response for CARS_01, CARS_02, ..., CARS_15
                CARSTable += `
        <tr>
            <td style="padding: 8px; border: 1px solid #ccc;">${CARSQuestions[i - 1]}</td>
            <td style="padding: 8px; border: 1px solid #ccc; color: #94059f;">${response}</td>
        </tr>`;
            }

            CARSTable += `</table>`;

            queryContainer.innerHTML = CARSTable;
        }
        // Function to check and hide CARS section if needed
        function handleCARSVisibility() {
            const urlParams = new URLSearchParams(window.location.search);
            const CARSValue = urlParams.get("CARS");

            if (CARSValue === "Negative") {
                document.getElementById("CARS").style.display = "None"; // Hide the CARS section
            }
        }
        
        

    </script>


    <!-- ---------------- CARS Report Ends ----------------------- -->
    <br>
    <!-- ---------------- INCLEN Report Starts ----------------------- -->

    <div id="INCLEN">
        <div style="display: flex; border-bottom: 5px solid #ab29b9;">
            <div>
                <div class="pageheadline" style="border-bottom: 0; font-size: small;" id="pageheadlinedateINCLEN"> .
                </div>
                <div class="pageheadline" style="display: flex; "> INCLEN Report</div>
            </div>
            <div style="margin-left: auto; margin-right: 0; ">
                <div style=" height: 60px;">

                    <img src="aignosislogo.png" style="max-height:150%; max-width:150%;" alt="">

                </div>
            </div>
        </div>
        <div class="reportheading">
            <span style="color: #9b00ab">INCLEN </span>Report:
        </div>
        <div class="reportcontent">

            The INCLEN (International Clinical Epidemiology Network) tool is a comprehensive screening instrument designed to identify developmental delays and neurodevelopmental disorders, including autism spectrum disorder (ASD), in children. This assessment evaluates key domains such as social interaction, communication, cognitive abilities, motor skills, and behavioral patterns to detect potential developmental concerns at an early stage.  
            <br>  
            The INCLEN score provides a structured analysis of the child's responses, categorizing them into different risk levels for developmental disorders. The system generates an overall assessment based on the child's responses to critical questions covering areas such as language development, social engagement, repetitive behaviors, and sensory processing.  
            <br>  
            The results include a classification indicator that helps determine whether a child exhibits typical development, mild concerns requiring follow-up, or a significant risk necessitating further evaluation. Early identification through INCLEN enables timely interventions, enhancing developmental outcomes and improving long-term well-being.  
            <BR>  


            INCLEN Score = <span id="INCLENscore" style="font-size: 35px; color: #007bff;"></span>
        </div>
        <span style="
    color: #9b00ab;
    font-family: 'Times New Roman', Times, serif;
    font-size: 20px;
    font-weight: 600;
    margin-left: 25px;
    ">
            Detailed INCLEN Report
        </span>
        <br /> 
        <span style="
    font-family: 'Times New Roman', Times, serif;
    font-size: 12px;
    font-weight: 600;
    margin-left: 25px;
    ">
            Summary of Domain Specific Challenges
        </span>
        <br>
        <!-- Patient Information Table -->
        <center>
            <table border="2" style="width: 50%; text-align: center; margin-top: 20px; border-collapse: collapse;">
                <tr>
                    <th style="padding: 10px; background-color: #94059f; color: white;">Field</th>
                    <th style="padding: 10px; background-color: #94059f; color: white;">Value</th>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ccc;">Name</td>
                    <td style="padding: 8px; border: 1px solid #ccc;" id="INCLENpatientNamecell">_</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ccc;">INCLEN Score</td>
                    <td style="padding: 8px; border: 1px solid #ccc;" id="INCLENScorecell">_</td>
                </tr>
                <tr>
                    <td style="padding: 8px; border: 1px solid #ccc;">Chronological Age</td>
                    <td style="padding: 8px; border: 1px solid #ccc;" id="INCLENchronologicalAgecell">_</td>
                </tr>
            </table>
        </center>
         <br>
        <div class="scorecontent" style="margin-top: -5px;">
            <p>The INCLEN test output provides an assessment of the child's developmental patterns based on their responses to key screening questions.</p>

<p>
    <strong>Lower INCLEN Score:</strong> A lower score indicates that the child's responses align closely with typical developmental milestones, suggesting a minimal likelihood of autism spectrum disorder (ASD) or other neurodevelopmental concerns. In this case, the child exhibits expected cognitive, social, and behavioral patterns, indicating typical development.
</p>

<p>
    <strong>Higher INCLEN Score:</strong> A higher score suggests that the child's responses indicate potential developmental concerns, including challenges in areas such as communication, social interaction, sensory processing, and cognitive functioning. A high score does not confirm a diagnosis but serves as an early indicator that further clinical evaluation may be necessary.
</p>

<p>
    The INCLEN screening tool is designed to help identify children who may require additional assessment and intervention at an early stage. Early detection and timely intervention can play a crucial role in supporting a child's developmental needs and improving long-term outcomes.
</p>

        </div>
        <br><br><br>

        <!-- <span style="font-family: 'Times New Roman', Times, serif; margin-left: 25px;">
        Lower scores indicate high Challenges
    </span> -->
        <center>
            <div class="container" id="contentToPrint">
                <!-- <h1>Patient Information</h1> -->
                <div id="patientData" hidden>
                    <!-- Data will be displayed here -->
                </div>

                <div id="chartContainerINCLEN">
                    <!-- Display query parameters instead of the bar chart -->
                    <!-- <h2>Query Parameters</h2> -->
                    <div id="queryParametersINCLEN"></div>
                </div>
            </div>
        </center>



        
    </div>
</div>
<script>
    // Function to format numbers to 1 decimal place
    function formatToOneDecimal(value) {
        return parseFloat(value).toFixed(1);
    }

    // List of INCLEN questions
    const INCLENQuestions = [
    "Does your child enjoy being hugged or taken in the lap?",
    "Did your child enjoy being hugged as a baby/toddler?",
    "Does your child make eye contact with others?",
    "Does your child use gestures in social interactions? (E.g., Namaste, waving bye, etc.)",
    "Does your child show facial expressions appropriate to situations?",
    "Does your child follow what you are pointing at?",
    "Does your child bring things to show you or seek help?",
    "Does your child follow instructions?",
    "Does your child initiate social interactions?",
    "Does your child respond when called by name?",
    "Is your child interested in other children?",
    "Does your child engage in pretend play? (E.g., playing house, feeding a doll, etc.)",
    "Does your child imitate others’ actions?",
    "Does your child respond to others' emotions?",
    "Does your child engage in repetitive behaviors? (E.g., hand flapping, spinning, lining up objects, etc.)",
    "Does your child insist on fixed routines or rituals?",
    "Does your child get distressed by small changes?",
    "Does your child have strong attachments to objects?",
    "Does your child show excessive interest in specific topics or objects?",
    "Does your child struggle to shift focus between activities?",
    "Does your child react unusually to sounds, textures, or lights?",
    "Does your child have an unusual sensitivity to pain or temperature?",
    "Does your child struggle with motor coordination?",
    "Does your child use speech in an unusual way? (E.g., echolalia, sing-song speech, repeating phrases)",
    "Has your child had speech or language delays?",
    "Does your child use gestures instead of speech?",
    "Does your child struggle to understand and follow instructions?",
    "Does your child have difficulty starting or maintaining conversations?",
    "Does your child frequently repeat phrases or words?",
    "Does your child avoid eye contact?",
    "Does your child struggle to recognize social cues like facial expressions or body language?",
    "Does your child display excessive aggression or self-harm?",
    "Does your child have frequent unexplained tantrums or emotional outbursts?",
    "Is your child hyperactive or restless?",
    "Does your child show extreme fear or a lack of fear in dangerous situations?",
    "Does your child focus excessively on parts of objects rather than the whole?",
    "Does your child engage in self-stimulatory behaviors? (E.g., flapping hands, rocking, spinning)",
    "Does your child have an unusual way of walking or moving?",
    "Does your child show an intense attachment to specific objects, topics, or routines?",
    "Does your child struggle to understand and express emotions?",
    "Does your child have difficulty adapting to new social situations?"
];



    // Function to display INCLEN responses
    function displayINCLENResponses() {
    const urlParams = new URLSearchParams(window.location.search);
    const queryContainer = document.getElementById("queryParametersINCLEN");

    let INCLENQueryParams = [
        "INCLEN_A1A1", "INCLEN_A1A2", "INCLEN_A1A3", "INCLEN_A1A4",
        "INCLEN_A1B1", "INCLEN_A1B2", "INCLEN_A1B3",
        "INCLEN_A1C1", "INCLEN_A1C2",
        "INCLEN_A1D1", "INCLEN_A1D2", "INCLEN_A1D3", "INCLEN_A1D4",
        "INCLEN_A2A", "INCLEN_A2B1", "INCLEN_A2B2",
        "INCLEN_A2C1", "INCLEN_A2C2", "INCLEN_A2C3", "INCLEN_A2C4", "INCLEN_A2C5",
        "INCLEN_A2D", "INCLEN_A3A1", "INCLEN_A3A2", "INCLEN_A3A3",
        "INCLEN_A3B", "INCLEN_A3C1", "INCLEN_A3C2", "INCLEN_A3D"
    ];

    let INCLENTable = `<table border="2" style="width: 100%; text-align: left; border-collapse: collapse;">
        <tr>
            <th style="padding: 10px; background-color: #94059f; color: white;">Question</th>
            <th style="padding: 10px; background-color: #94059f; color: white;">Response</th>
        </tr>`;

    INCLENQueryParams.forEach((param, index) => {
        let response = urlParams.get(param) || "_"; // Fetch response from URL
        INCLENTable += `
        <tr>
            <td style="padding: 8px; border: 1px solid #ccc;">${INCLENQuestions[index]}</td>
            <td style="padding: 8px; border: 1px solid #ccc; color: #94059f;">${response}</td>
        </tr>`;
    });

    INCLENTable += `</table>`;

    queryContainer.innerHTML = INCLENTable;
}

    // Function to check and hide INCLEN section if needed
    function handleINCLENVisibility() {
        const urlParams = new URLSearchParams(window.location.search);
        const INCLENValue = urlParams.get("INCLEN");

        if (INCLENValue === "Negative") {
            document.getElementById("INCLEN").style.display = "None"; // Hide the INCLEN section
        }
    }

    // Update on page load
    window.onload = () => {
            handleCARSVisibility();
            displayCARSResponses();
            displayISAAResponses();
            displayINCLENResponses();
            createCARSChart(); // Call the function to generate the bar chart

            // Populate the table
            const urlParams = new URLSearchParams(window.location.search);
            const patientName = urlParams.get("Name") || "N/A";
            const CARSscore = formatToOneDecimal(urlParams.get("TOT_CARS") || 0);
            const isaascore = formatToOneDecimal(urlParams.get("TOT_ISAA") || 0);

            // const formattedClassification = isNaN(classification) ? classification : formatToOneDecimal(classification);
            const currentDate = new Date().toLocaleString();
            const carsInterpretation = urlParams.get("carsInterpretation") || 0;
            const isaaInterpretation = urlParams.get("isaaInterpretation") || 0;
            document.getElementById("CARSScorecell").innerHTML = CARSscore;
            document.getElementById("CARSpatientNamecell").innerHTML = patientName;
            document.getElementById("INCLENpatientNamecell").innerHTML = patientName;
            document.getElementById("CARSinterpretation").innerHTML = carsInterpretation;
            document.getElementById("ISAAinterpretation").innerHTML = isaaInterpretation;
            document.getElementById('pageheadlinedateCARS').innerHTML = currentDate;
            document.getElementById('CARSscore').innerHTML = CARSscore;
            document.getElementById('ISAAScorecell').innerHTML = isaascore;
            // document.getElementById('classificationmessage').innerHTML = formattedClassification;

            handleMChatVisibility();
            handleISAAVisibility();
            handleINCLENVisibility();
            displayMChatResponses();
            displayData();
            
            // Extract data from URL
            const mchatScore = urlParams.get("MCHATscore") || "N/A";
            const INCLENscore = urlParams.get("INCLENscore") || "N/A";
            const chronologicalAge = urlParams.get("Age") || "N/A";
            // Populate the table
            console.log(patientName);
            document.getElementById("patientNamecell").innerHTML = patientName;
            document.getElementById("isaapatientNamecell").innerHTML = patientName;
            document.getElementById("mchatScorecell").innerHTML = mchatScore;
            document.getElementById("INCLENScorecell").innerHTML = INCLENscore;
            document.getElementById("chronologicalAgecell").innerHTML = chronologicalAge + " Years";
            document.getElementById("INCLENchronologicalAgecell").innerHTML = chronologicalAge + " Years";
            const MCHATscore = formatToOneDecimal(urlParams.get("MCHATscore") || 0);
            const classification = urlParams.get("dq") || "N/A";
            const formattedClassification = isNaN(classification) ? classification : formatToOneDecimal(classification);
            document.getElementById('pageheadlinedatemchat').innerHTML = currentDate;
            document.getElementById('pageheadlinedateINCLEN').innerHTML = currentDate;
            document.getElementById('MCHATscore').innerHTML = MCHATscore;
            document.getElementById('INCLENscore').innerHTML = INCLENscore;
            // document.getElementById('classificationmessage').innerHTML = formattedClassification;




        };

</script>
    <!-- ---------------- INCLEN Report Ends ----------------------- -->
</body>

</html>
